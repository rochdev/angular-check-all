angular.module("checkAll",[]).directive("checkAll",["$parse",function(n){"use strict";function r(n,r){-1===n.indexOf(r)&&n.push(r)}function i(n,r){var i=n.indexOf(r);-1!==i&&n.splice(i,1)}return{restrict:"A",scope:!0,link:function(a,t,u){function e(){var n=p(a)||[],r=d(n,s);t.prop("indeterminate",!r&&h(n,l)),t.prop("checked",r)}function o(n,r){u.nestedBy&&angular.forEach(E(n),function(n){o(n,r)}),b.assign(n,r)}function c(n,i){r(n,v(i)),u.nestedBy&&angular.forEach(E(i),function(r){c(n,r)})}function f(n,r,i){angular.isArray(n[r])||angular.isObject(n[r])?angular.forEach(n[r],function(a,t){f(n[r],t,i)}):n[r]=i}function l(n,r){if(void 0!==u.byValue){if(E(n))return y(n,r)||h(E(n),l)}else if(!u.toList&&(angular.isArray(n)||angular.isObject(n)))return h(n,l);return y(n,r)}function s(n,r){if(void 0!==u.byValue){if(E(n))return y(n,r)&&d(E(n),s)}else if(!u.toList&&(angular.isArray(n)||angular.isObject(n)))return d(n,s);return y(n,r)}function y(n,r){if(u.toList){var i=A(a)||[];return void 0!==u.byKey?-1!==i.indexOf(r):-1!==i.indexOf(v(n))}return v(n)===!0}function h(n,r){if(angular.isArray(n)){for(var i=0;i<n.length;i++)if(r(n[i],i,n))return!0}else if(angular.isObject(n))for(var a in n)if(n.hasOwnProperty(a)&&r(n[a],a,n))return!0;return!1}function d(n,r){return!h(n,function(n,i){return!r(n,i)})}function v(n){return void 0!==u.byValue?b(n):n}function g(n){var r=[];return angular.forEach(n,function(n){r.push(v(n)),E(n)&&Array.prototype.push.apply(r,g(E(n)))}),r}var p=n(u.checkAll),b=n(u.byValue),A=n(u.toList),E=n(u.nestedBy);a.$watch(u.checkAll,e,!0),u.toList&&(a.$watch(u.toList,e,!0),a.$watch(u.checkAll,function(n,r){if(r){var t=A(a);if(t)if(void 0!==u.byKey)angular.forEach(r,function(r,a){void 0===n[a]&&i(t,a)});else{var e=g(n);angular.forEach(g(r),function(n){-1===e.indexOf(n)&&i(t,n)})}}},!0)),t.on("click",function(){a.$apply(function(){var n=p(a)||[],t=!d(n,s);if(u.toList){var e=A(a);e||(e=A.assign(a.$parent,[])),t?angular.forEach(n,function(n,i){void 0!==u.byKey&&void 0===u.byValue?r(e,i):c(e,n)}):void 0!==u.byKey&&void 0===u.byValue?angular.forEach(n,function(n,r){i(e,r)}):angular.forEach(g(n),function(n){i(e,n)})}else angular.forEach(n,function(r,i){void 0!==u.byValue?o(r,t):f(n,i,t)})})})}}}]);
//# sourceMappingURL=angular-check-all.min.js.map