angular.module("checkAll",[]).directive("checkAll",["$parse",function(n){"use strict";function r(n,r){-1===n.indexOf(r)&&n.push(r)}function i(n,r){var i=n.indexOf(r);-1!==i&&n.splice(i,1)}return{restrict:"A",scope:!0,link:function(t,a,e){function u(){var n=p(t)||[],r=d(n,s);a.prop("indeterminate",!r&&h(n,l)),a.prop("checked",r)}function c(n,r){e.nestedBy&&angular.forEach(O(n),function(n){c(n,r)}),b.assign(n,r)}function o(n,i){r(n,g(i)),e.nestedBy&&angular.forEach(O(i),function(r){o(n,r)})}function f(n,r,i){angular.isArray(n[r])||angular.isObject(n[r])?angular.forEach(n[r],function(t,a){f(n[r],a,i)}):n[r]=i}function l(n,r){if(void 0!==e.byValue){if(O(n))return y(n,r)||h(O(n),l)}else if(!e.toList&&(angular.isArray(n)||angular.isObject(n)))return h(n,l);return y(n,r)}function s(n,r){if(void 0!==e.byValue){if(O(n))return y(n,r)&&d(O(n),s)}else if(!e.toList&&(angular.isArray(n)||angular.isObject(n)))return d(n,s);return y(n,r)}function y(n,r){if(e.toList){var i=A(t)||[];return void 0!==e.byKey?-1!==i.indexOf(r):-1!==i.indexOf(g(n))}return g(n)===!0}function h(n,r){if(angular.isArray(n)){for(var i=0;i<n.length;i++)if(r(n[i],i,n))return!0}else if(angular.isObject(n))for(var t in n)if(n.hasOwnProperty(t)&&r(n[t],t,n))return!0;return!1}function d(n,r){return!h(n,function(n,i){return!r(n,i)})}function g(n){return void 0!==e.byValue?b(n):n}function v(n){var r=[];return angular.forEach(n,function(n){r.push(g(n)),O(n)&&Array.prototype.push.apply(r,v(O(n)))}),r}var p=n(e.checkAll),b=n(e.byValue),A=n(e.toList),O=n(e.nestedBy);t.$watch(e.checkAll,u,!0),e.toList&&(t.$watch(e.toList,u,!0),t.$watch(e.checkAll,function(n,r){if(r){var a=A(t);if(a)if(void 0!==e.byKey)angular.forEach(r,function(r,t){void 0===n[t]&&i(a,t)});else{var u=v(n);angular.forEach(v(r),function(n){-1===u.indexOf(n)&&i(a,n)})}}},!0)),a.on("click",function(){t.$apply(function(){var n=p(t)||[],i=!d(n,s);if(e.toList){var a=A(t);a||(a=A.assign(t.$parent,[])),i?angular.forEach(n,function(n,i){void 0!==e.byKey&&void 0===e.byValue?r(a,i):o(a,n)}):a.splice(0,a.length)}else angular.forEach(n,function(r,t){void 0!==e.byValue?c(r,i):f(n,t,i)})})})}}}]);
//# sourceMappingURL=angular-check-all.min.js.map